# shell中的通配符

| 通配符 |              使用说明              |
| :----: | :--------------------------------: |
|   *    |      匹配0个或者是任意个字符       |
|   ？   |          匹配任意一个字符          |
|   []   | 我们可以指定匹配的字符放在 "[]" 中 |



通配符，不仅可以用在shell命令中，还可以用在makefile规则中：

```makefile
.PHONY:clean
clean:
    rm -rf *.o test
```

```makefile
test:*.c
    gcc -o $@ $^
```



如果需要在依赖规则中使用通配符，不要通过引用变量的形式：

```makefile
OBJ=*.c
test:$(OBJ)
    gcc -o $@ $^
```

我们去执行这个命令的时候会出现错误，提示我们没有 "\*.c" 文件，实例中我们相要表示的是当前目录下所有的 ".c" 文件，但是我们在使用的时候并没有展开，而是直接识别成了一个文件。文件名是 "\*.c"。

解决方案：使用函数 `wildcard`，这个函数在我们引用变量的时候，会帮我们展开。

```makefile
OBJ=$(wildcard *.c)
test:$(OBJ)
    gcc -o $@ $^
```



# 通配符`%`

类似于`*`，也是匹配任意个字符。



```makefile
test:test.o test1.o
    gcc -o $@ $^ 
    
%.o:%.c
    gcc -o $@ $^
```

 "%.o" 把我们需要的所有的 ".o" 文件组合成为一个列表，从列表中挨个取出的每一个文件，"%" 表示取出来文件的文件名（不包含后缀），然后**找到文件中和 "%"<u>名称相同</u>的 ".c" 文件，然后执行下面的命令**，直到列表中的文件全部被取出来为止。

