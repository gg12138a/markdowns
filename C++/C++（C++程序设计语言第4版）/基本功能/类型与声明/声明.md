# 声明的作用

在C++中，使用某个名字（标识符）之前，必须对其进行声明。

换句话说，**我们必须指定它的类型，以便编译器知道这个名字对应哪种实体**。



大多数声明，同时也是定义。

每个名字，可以对应多个声明，但只能有一个定义。



# 声明的结构

一条声明语句，依次包含五个部分：

- 可选的前置修饰符（static、virtual）
- 基本类型（如vector\<double>，const int）
- **可选的声明符，可包含一个名字**（比如p[7]、n、\*(\*)[]）
- 可选的后缀函数修饰符（如const、noexcept）
- 可选的初始化器或函数体（如={3,4,5}，{return x;}）



比如：

```C++
const char *kings[] = {"Antigonus", "Seleucus", "Ptolemy"};
```

基本类型为const char，声明符为*kings[]。



声明符，由一个名字和一些声明运算符组成：
![image-20220720191913375](%E5%A3%B0%E6%98%8E.assets/image-20220720191913375.png)

> 后缀声明符，其绑定效果比前缀声明符更紧密。



# 初始化器

## 初始化器的四种形式

初始化器的四种可能形式：

```C++
X a1{v};
X a2 = {v};
X a3 = v;
X a4{v};
```

使用{}的初始哈，称为列表初始化，其能防止***窄化转换***。

- 如果一个整型，存不下另一种整型，则后者不会转换为前者。

  例如：允许char to int，但不允许int to char。

- 浮点型同理。

  例如：允许float to double，但不允许double to float。

- 不允许整形值，转换为浮点值。
- 不允许浮点值，转换为整型值。



## 变量的初始值

空初始化器`{}`，**指定使用默认值进行初始化**：

![image-20220720195840415](%E5%A3%B0%E6%98%8E.assets/image-20220720195840415.png)





若没有指定初始化器：

- 全局变量、名称空间变量、局部static变量、static成员：

  按照相应数据类型的列表{}初始化。

- 局部变量、堆上的对象：

  若无默认构造函数，不进行初始化。



## 初始化器列表

用途：

- C风格的数组初始化
- C风格的结构体初始化
- 构造函数
- 初始化器列表构造函数





# 推断类型

## auto类型修饰符

可以为推断出的类型，添加修饰符或说明符（如const 和 &）



如果希望得到某个具体类型，而非`initializer_list<T>`，使用`=`：

```C++
auto v1{12345};	// inititalizer<int>
auto v2 = 12;	// int
```



## decltype()修饰符

`decltype(expr)`：得到的结果是expr的声明类型。

