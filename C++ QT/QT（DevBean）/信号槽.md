# 初探信号槽

简单的说，信号槽就好比一个“插头”和一个“插座”。

- 当某种事件发生之后（如鼠标点击或按下某键），这个组件就会发出一个信号。
- 如果某个槽，正好对应上这个信号，那么该槽的函数就会执行（即回调）。

>就像广播发出了，如果你感兴趣，那么你就会对这个广播有反应。



```C++
#include <QApplication>
#include <QPushButton>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QPushButton* button = new QPushButton("quit");
    QObject::connect(button,SIGNAL(clicked()),&a,SLOT(quit()));
    button->show();

    return a.exec();
}
```



核心代码：

```C++
QObject::connect(button, SIGNAL(clicked()), &a, SLOT(quit()));
```

- QObject 是所有类的根。Qt 使用这个 QObject 实现了一个单根继承的 C++。它里面有一个 connect静态函数，用于连接信号槽。

- 在本示例中，如果button发出了clicked信号，就执行QApplication实例a的quit()方法。

  > 所以，在这里：
  >
  > - clicked()就是一个信号；
  > - quit()就是一个槽。



# QObject::connect()

## 重载形式

在 Qt 5 中，`QObject::connect()`有五个重载：

```C++
QMetaObject::Connection connect(const QObject *, const char *,
                                const QObject *, const char *,
                                Qt::ConnectionType);

QMetaObject::Connection connect(const QObject *, const QMetaMethod &,
                                const QObject *, const QMetaMethod &,
                                Qt::ConnectionType);

QMetaObject::Connection connect(const QObject *, const char *,
                                const char *,		// 将 this 指针作为 receiver
                                Qt::ConnectionType) const;

QMetaObject::Connection connect(const QObject *, PointerToMemberFunction,
                                const QObject *, PointerToMemberFunction,
                                Qt::ConnectionType)

QMetaObject::Connection connect(const QObject *, PointerToMemberFunction,
                                Functor);	// 可以接受 static 函数、全局函数以及 Lambda 表达式
```

- 返回值一般不关心。

- 最常用的形式：

  ```C++
  connect(csender, signal,
          receiver, slot);
  ```

  - sender：发出信号的对象
  - signal：发出去的信号
  - receiver：接收信号的对象
  - slot：用于回调的函数



## 信号与槽的参数

- 一般情况下，要求信号与槽的参数一致（类型、顺序一致）
- 但允许槽函数的参数，比信号少。



# 自定义信号槽

[Qt 学习之路 2（5）：自定义信号槽 - DevBean Tech World](https://www.devbean.net/2012/08/qt-study-road-2-custom-signal-slot/)
